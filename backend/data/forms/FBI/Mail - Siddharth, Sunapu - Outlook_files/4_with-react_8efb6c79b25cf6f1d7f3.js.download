/*! Version: 1.0.0; Third Party Notices: https://lpcres.delve.office.com/lpc/versionless/tpn-0f9b4258b013de50755b14b166a0f165ae3efa86d6af835bdf9902e118bad796ed37868b399b5e259ced5c1690ac785b20617fba8c92ad87f1c8fb0bb16bcb59.txt */
(window.webpackJsonpLpc=window.webpackJsonpLpc||[]).push([[4],{1536:function(t,e,n){"use strict";n.r(e);var a=n(817),r=n(231),o=n.n(r),i=n(184),s=n.n(i),l=n(6),u=n(440),p=n(1087),c=n(914),d=n(985),h=n(903),m=n(912),f=n(1136),g=n(1138),v=n(834),y=n(1194),S=n(4),b=n(229),E=n(893);function C(t){try{return t.toDataURL("image/jpeg")}catch(t){return console.error(t),""}}var w=n(2),x=n.n(w),U=n(164),I=n(1197),k=n(1192),D=n(161);function O(t){var e=new DataView(function(t){for(var e=t.replace(/^data\:([^\;]+)\;base64,/i,""),n=atob(e),a=n.length,r=new ArrayBuffer(a),o=new Uint8Array(r),i=0;i<a;i++)o[i]=n.charCodeAt(i);return r}(t));if(65496!==e.getUint16(0,!1))return 1;for(var n,a=e.byteLength,r=2;r<a;){var o=e.getUint16(r,!1);if(r+=2,65505===o){if(1165519206!==e.getUint32(r+=2,!1))break;var i=18761===e.getUint16(r+=6,!1);r+=e.getUint32(r+4,i);var s=e.getUint16(r,i);r+=2;for(var l=0;l<s;l++)if(274===e.getUint16(r+12*l,i))return(n=e.getUint16(r+12*l+8,i))<1||n>8?1:n}else{if(65280!=(65280&o))break;r+=e.getUint16(r,!1)}}return 1}var P,N=n(26),B=n(680),R=function(){return(R=x.a||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},_=Object(B.b)(function(t,e){var n=t.palette;return Object(N.W)({editControls:{display:"flex",flexDirection:"row",width:"100%",height:54},zoomButton:{selectors:{"&:disabled":{background:n.white}}},editCanvas:{backgroundColor:n.white,cursor:e?"move":"inherit"},invisible:R({clip:"rect(1px, 1px, 1px, 1px)"},{height:1,overflow:"hidden",position:"absolute",whiteSpace:"nowrap",width:1}),slider:{flexGrow:1,marginTop:2,marginBottom:24,selectors:{".ms-Slider-thumb":{border:"2px solid "+n.themePrimary},".ms-Slider-active":{backgroundColor:n.themePrimary},".ms-Slider-inactive":{backgroundColor:n.themeLight}}},canvasContainer:{margin:"0 auto",display:"flex",alignItems:"center",flexDirection:"column",width:256,position:"relative"},textboy:{color:n.white,position:"absolute",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",top:0,left:0,width:256,height:256},initials:{fontSize:128,lineHeight:128}})}),L=(P=function(t,e){return(P=s.a||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}P(t,e),t.prototype=null===e?o()(e):(n.prototype=e.prototype,new n)}),W={1:[1,0,0,1,0,0],2:[-1,0,0,1,0,0],3:[-1,0,0,-1,0,0],4:[1,0,0,-1,0,0],5:[0,1,1,0,0,0],6:[0,1,-1,0,0,0],7:[0,-1,-1,0,0,0],8:[0,-1,1,0,0,0]},A=function(t,e,n){return Math.min(n,Math.max(t,e))},M=function(t){function e(e){var n=t.call(this,e)||this;return n.hasUnmounted=!1,n.editorCanvas=null,n.textBoy=null,n.initialState={xpos:0,ypos:0,absoluteScale:1,relativeScale:0,stepSize:.1,orientation:1,maximumScale:1,naturalMin:0,naturalWidth:0,naturalHeight:0,moving:!1,lastMouseX:0,lastMouseY:0,zoomInDisabled:!0,zoomOutDisabled:!0,image:void 0,initialRender:!0},n.state=x()({},n.initialState),n}return L(e,t),e.prototype.render=function(){var t=this,e=!this.state.image||this.state.maximumScale<=1||this.props.progress>0,n=!e||this.state.naturalHeight!==this.state.naturalWidth,a=_(this.props.theme,n),r=1===this.props.progress?S.createElement("div",{className:a.textboy},S.createElement("span",{className:a.invisible},this.props.strings.success),S.createElement(I.a,{className:a.initials,iconName:"CheckMark"})):null,o=A(2*this.state.stepSize,.1,.2),i=e?S.createElement("div",{className:a.editControls}):S.createElement("div",{className:a.editControls},S.createElement(p.a,{className:a.zoomButton,iconProps:{iconName:"CalculatorSubtract"},title:this.props.strings.zoomOut,ariaLabel:this.props.strings.zoomOut,onClick:function(){return t.zoom(-o,128,128)},disabled:this.state.zoomOutDisabled,tabIndex:-1}),S.createElement(k.a,{ariaValueText:function(e){return Math.round(100*(e*(t.state.maximumScale-1)+1))+"%"},ariaLabel:this.props.strings.zoom,className:a.slider,min:0,max:1,step:A(this.state.stepSize,.05,.1),value:this.state.relativeScale,showValue:!1,onChange:function(e){return t.handleZoomSlider(e)}}),S.createElement(p.a,{className:a.zoomButton,iconProps:{iconName:"CalculatorAddition"},title:this.props.strings.zoomIn,ariaLabel:this.props.strings.zoomIn,onClick:function(){return t.zoom(o,128,128)},disabled:this.state.zoomInDisabled,tabIndex:-1}));return S.createElement("div",{className:a.canvasContainer},S.createElement("canvas",{className:a.editCanvas,role:"img",tabIndex:this.state.image?0:void 0,ref:function(e){return t.editorCanvas=e},width:256,height:256,onKeyDown:function(e){return t.onKeyboardHandler(e)},"aria-label":this.props.strings.dropZone}),S.createElement("div",{className:a.textboy,ref:function(e){return t.textBoy=e}},S.createElement("div",{className:a.initials},this.props.initials),S.createElement("div",null,this.props.strings.dropZone)),S.createElement("div",{role:"region","aria-live":"assertive","aria-atomic":!0},r),i)},e.prototype.componentWillUnmount=function(){this.hasUnmounted=!0},e.prototype.componentDidMount=function(){var t=this;this.props.dataUrl&&setTimeout(function(){return t.props.dataUrl&&t.loadImage(t.props.dataUrl)},0),this.attachEventListeners(),this.renderCanvasContent()},e.prototype.shouldComponentUpdate=function(t,e){return!Object(U.a)(t,this.props)||!Object(U.a)(e,this.state)},e.prototype.componentWillReceiveProps=function(t){t.dataUrl&&t.dataUrl!==this.props.dataUrl?this.loadImage(t.dataUrl):t.dataUrl!==this.props.dataUrl&&(this.state=x()({},this.initialState))},e.prototype.componentDidUpdate=function(t){this.renderCanvasContent(),1===this.props.progress&&t.progress!==this.props.progress&&this.props.onRefocus()},e.prototype.getImageDataUrlFromCanvas=function(t){var e=this;if(void 0===t&&(t=648),!this.state.image)return"";var n=document.createElement("canvas"),a=this.state.naturalMin/this.state.absoluteScale;n.width=a,n.height=a;var r=n.getContext("2d");if(!r)return this.props.onError("UNSUPPORTED_BROWSER"),"";r.fillStyle="white",r.fillRect(0,0,n.width,n.height),this.state.image&&this.withCenterRotated(r,n.width,this.state.orientation,this.state.image,function(t,a){return r.drawImage(a,e.state.xpos*n.width/256,e.state.ypos*n.height/256,e.state.naturalWidth,e.state.naturalHeight)});for(var o=1;n.width*o/4>=t;)o/=2,r.drawImage(n,0,0,n.width*o,n.height*o);var i=document.createElement("canvas"),s=Math.min(this.state.naturalMin/this.state.absoluteScale,t);i.width=s,i.height=s;var l=i.getContext("2d");return l?(l.drawImage(n,0,0,n.width*o,n.width*o,0,0,s,s),C(i)):(this.props.onError("UNSUPPORTED_BROWSER"),"")},e.prototype.loadImage=function(t){var e=this;if(t){var n=new Image;n.onload=function(){return e.imageLoaded(n)},n.src=t}else this.setState(this.initialState)},e.prototype.imageLoaded=function(t){var e=this,n=Math.min(t.naturalWidth,t.naturalHeight),a=n/256,r=function(t){return-.5*(t/a-256)},o=Math.min(1,Math.max(.01,256/(2*Math.max(t.naturalWidth,t.naturalHeight)))),i=Object(l.k)(this.initialState,{naturalMin:n,naturalWidth:t.naturalWidth,naturalHeight:t.naturalHeight,stepSize:o,maximumScale:a,orientation:O(t.src),image:t,zoomInDisabled:!1,initialRender:!1,xpos:r(t.naturalWidth),ypos:r(t.naturalHeight)});!this.state.initialRender&&i.maximumScale<1&&setTimeout(function(){return e.props.onError("IMAGE_TOO_SMALL")},0),this.hasUnmounted||this.setState(i)},e.prototype.renderCanvasContent=function(){var t=this,e=this.editorCanvas;if(e&&this.textBoy){var n=e.getContext("2d");if(n){var a=window.getComputedStyle(e);n.fillStyle=a.backgroundColor||"#ffffff",n.fillRect(0,0,1,1);var r=n.getImageData(0,0,1,1).data,o="rgba("+r[0]+", "+r[1]+", "+r[2]+", 0.6)",i="rgba("+r[0]+", "+r[1]+", "+r[2]+", 1)";""===this.props.dataUrl?(n.fillStyle=this.props.textboyColor,this.textBoy.style.display="flex"):(n.fillStyle="white",this.textBoy.style.display="none"),n.fillRect(0,0,256,256),this.state.image&&this.withCenterRotated(n,256,this.state.orientation,this.state.image,function(e,n){return e.drawImage(n,t.state.xpos,t.state.ypos,t.state.naturalWidth*t.state.absoluteScale/t.state.maximumScale,t.state.naturalHeight*t.state.absoluteScale/t.state.maximumScale)}),n.save(),n.beginPath(),n.rect(0,0,256,256),n.arc(128,128,125,0,2*Math.PI,!0),n.clip(),n.fillStyle=o,n.fillRect(0,0,256,256),n.restore(),n.save(),n.beginPath(),n.arc(128,128,126,0,2*Math.PI,!0),n.lineWidth=2,n.strokeStyle=i,n.stroke(),n.restore(),n.save(),n.beginPath(),n.lineWidth=4,n.fillStyle="rgba(0, 120, 215, 0.5)",n.strokeStyle="rgba(0, 120, 215, 0.5)",n.arc(128,128,125,-Math.PI/2,2*this.props.progress*Math.PI-Math.PI/2,!1),1===this.props.progress&&n.fill(),n.stroke(),n.restore()}else this.props.onError("UNSUPPORTED_BROWSER")}},e.prototype.withCenterRotated=function(t,e,n,a,r){t.save(),t.translate(e/2,e/2),t.transform.apply(t,W[n]),t.translate(-e/2,-e/2),r(t,a),t.restore()},e.prototype.rotate=function(t,e,n){var a=W[n],r=a[0],o=a[2];return{x:(t-=128)*r+(e-=128)*a[1]+128,y:t*o+e*a[3]+128}},e.prototype.attachEventListeners=function(){var t=this;this.editorCanvas&&this.textBoy&&(this.editorCanvas.addEventListener("dragenter",this.handleDragEnter.bind(this),!1),this.editorCanvas.addEventListener("dragleave",this.handleDragLeave.bind(this),!1),this.editorCanvas.addEventListener("dragover",this.stopEventDefaults.bind(this),!1),this.editorCanvas.addEventListener("drop",this.handleFileDrop.bind(this),!1),this.textBoy.addEventListener("dragenter",this.handleDragEnter.bind(this),!1),this.textBoy.addEventListener("dragleave",this.handleDragLeave.bind(this),!1),this.textBoy.addEventListener("dragover",this.stopEventDefaults.bind(this),!1),this.textBoy.addEventListener("drop",this.handleFileDrop.bind(this),!1),this.editorCanvas.addEventListener("mousedown",this.handleDragStart.bind(this),!1),this.editorCanvas.addEventListener("mousemove",function(e){return t.handleDrag(e,!0)},!1),this.editorCanvas.addEventListener("mouseup",function(e){return t.handleDrag(e,!1)},!1),this.editorCanvas.addEventListener("mouseleave",function(e){return t.handleDrag(e,!1)},!1),this.editorCanvas.addEventListener("wheel",this.handleWheel.bind(this),!1))},e.prototype.stopEventDefaults=function(t){t.stopPropagation(),t.preventDefault()},e.prototype.keepInside=function(t,e){return t>0?0:t+e<256?256-e:t},e.prototype.handleZoomSlider=function(t){!this.state.image||this.state.maximumScale<1||this.zoom(t-this.state.relativeScale,128,128,!1)},e.prototype.newScaledPosition=function(t,e,n,a){var r=t+(e-t)*a/this.state.absoluteScale,o=a*n/this.state.maximumScale;return this.keepInside(r,o)},e.prototype.zoom=function(t,e,n,a){var r=this;if(void 0===a&&(a=!0),this.state.image&&!(this.state.maximumScale<1)){var o=Math.min(1,Math.max(0,this.state.relativeScale+t));if(o!==this.state.relativeScale){var i=Math.exp(o*Math.log(this.state.maximumScale));this.setState(function(t,s){var u=i<=1,p=i>=t.maximumScale;return a&&(u||p)&&r.props.onRefocus(),Object(l.k)(t,{absoluteScale:i,relativeScale:o,zoomOutDisabled:u,zoomInDisabled:p,xpos:r.newScaledPosition(e,r.state.xpos,r.state.naturalWidth,i),ypos:r.newScaledPosition(n,r.state.ypos,r.state.naturalHeight,i)})}),this.props.onUpdate()}}},e.prototype.handleWheel=function(t){if(this.state.image){this.stopEventDefaults(t);var e=t.deltaY>0?-1:1,n=this.rotate(t.offsetX,t.offsetY,this.state.orientation),a=n.x,r=n.y;this.zoom(A(this.state.stepSize,.05,.1)*e,a,r)}},e.prototype.handleDragStart=function(t){var e=this.rotate(t.clientX,t.clientY,this.state.orientation),n=e.x,a=e.y;this.state.image&&(this.stopEventDefaults(t),this.setState(function(t,e){return Object(l.k)(t,{moving:!0,lastMouseX:n,lastMouseY:a})}))},e.prototype.handleDrag=function(t,e){this.stopEventDefaults(t);var n=this.rotate(t.clientX,t.clientY,this.state.orientation),a=n.x,r=n.y;if(this.state.image&&this.state.moving){var o=this.keepInside(this.state.xpos+(a-this.state.lastMouseX),this.state.naturalWidth*this.state.absoluteScale/this.state.maximumScale),i=this.keepInside(this.state.ypos+(r-this.state.lastMouseY),this.state.naturalHeight*this.state.absoluteScale/this.state.maximumScale);(this.state.xpos!==o||this.state.ypos!==i)&&this.props.onUpdate(),this.setState(function(t,n){return Object(l.k)(t,{moving:e,xpos:o,ypos:i,lastMouseX:a,lastMouseY:r})})}},e.prototype.handleDragEnter=function(t){this.stopEventDefaults(t),this.editorCanvas&&(this.editorCanvas.style.outline="1px solid purple")},e.prototype.handleDragLeave=function(t){this.stopEventDefaults(t),this.editorCanvas&&(this.editorCanvas.style.outline="none")},e.prototype.handleFileDrop=function(t){this.handleDragLeave(t),t.dataTransfer&&this.props.onFileSelected(t.dataTransfer.files[0])},e.prototype.onKeyboardHandler=function(t){var e=this;switch(t.key){case"+":return this.zoom(this.state.stepSize,128,128,!1);case"-":return this.zoom(-this.state.stepSize,128,128,!1)}var n=(t.which===D.a.left?1:t.which===D.a.right&&-1)||0,a=(t.which===D.a.up?1:t.which===D.a.down&&-1)||0,r=this.rotate(n,a,this.state.orientation),o=r.x,i=r.y;this.state.image&&this.setState(function(t,n){var a=o*t.naturalWidth/100,r=i*t.naturalHeight/100;return Object(l.k)(t,{xpos:e.keepInside(t.xpos+a,t.naturalWidth*t.absoluteScale/t.maximumScale),ypos:e.keepInside(t.ypos+r,t.naturalHeight*t.absoluteScale/t.maximumScale)})})},e}(S.Component),T=n(917),j=n(1207),z=Object(B.b)(function(t){var e=t.palette;return Object(N.W)({picker:t.fonts.medium,uploadHeader:t.fonts.xLarge,messageBarText:t.fonts.medium},{modal:{width:512,maxWidth:512,margin:0,selectors:{"#lpc-photo-picker .ms-Button-icon":{display:"inline-block",minWidth:16,padding:"0px 4px",backgroundColor:"transparent"},"#lpc-photo-picker .ms-Slider-slideBox:focus":{outline:"transparent"},"#lpc-photo-picker .ms-Button":{height:32,border:"none"},"#lpc-photo-picker .ms-Button--default":{marginLeft:0,backgroundColor:e.neutralLighter},"#lpc-photo-picker .ms-Button--icon &hover":{color:e.themePrimary},"#lpc-photo-picker .ms-Button--icon &active":{color:e.themeDarker},"#lpc-photo-picker .ms-Button--primary &:not([disabled])":{backgroundColor:e.themePrimary},"#lpc-photo-picker .ms-Button--primary &:hover":{backgroundColor:e.themeDarkAlt},"#lpc-photo-picker .ms-Button--primary &:active":{backgroundColor:e.themeDark},"#lpc-photo-picker .ms-Button--default .ms-Button-label":{color:e.neutralDark},"#lpc-photo-picker .ms-Button--default &:hover":{backgroundColor:e.neutralLight},"#lpc-photo-picker .ms-Button--default &:active":{backgroundColor:e.neutralTertiaryAlt}}},picker:{padding:32,overflow:"hidden"},header:{display:"flex",alignContent:"space-between"},uploadHeader:{color:e.neutralPrimary,fontWeight:300,marginBottom:7,flexGrow:1},messageBar:{margin:"7px 0"},messageBarText:{color:e.neutralPrimary},fileInput:{display:"none"},fileInputButton:{color:e.themePrimary,padding:0,margin:"0 0 12px -4px"},closeButton:{float:"right",marginTop:-20,marginRight:-20},removeButton:{marginLeft:"auto"},endActions:{alignItems:"center",display:"flex",selectors:{button:{marginRight:12,minWidth:90,padding:"0px 16px"}}}})}),H=function(t){var e=z(t.theme),n="UNKNOWN"===t.warning,a=n?T.a.error:T.a.warning,r=n?void 0:t.onDismiss;return S.createElement(j.a,{className:e.messageBar,messageBarType:a,onDismiss:r,isMultiline:!0,"aria-live":"polite",role:"region"},S.createElement("div",{className:e.messageBarText},t.warningText))},G=function(){var t=function(e,n){return(t=s.a||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?o()(n):(a.prototype=n.prototype,new a)}}(),F=function(t){function e(e){return 1/(1+Math.exp(-t*e))-.5}var n=.5/e(1);return function(t){return t<=0?0:t>1?1:n*e(2*t-1)+.5}}(5),Y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.editCanvas=null,e.fileInput=null,e.focusTrap=null,e.primaryButton=null,e.handleOnRemoveButtonClicked=function(){e.props.onLoadedEmptyImage()},e.handleOnSaveButtonClicked=function(){switch(e.props.status){case"SUCCESS":return e.props.onDismiss();default:if(!e.editCanvas)return;var t=e.editCanvas.getImageDataUrlFromCanvas();e.props.onStartUpload(performance.now(),t,e.props.onUpload)}},e.handleUploadAnimation=function(){"IN_PROGRESS"===e.props.status&&e.props.onUploadProgress(performance.now())},e.handleOnCancelButtonClicked=function(){e.props.onImageEditCancelled(),e.props.onDismiss()},e}return G(e,t),e.prototype.render=function(){var t=this,e=z(this.props.theme),n=this.getSaveButtonText(this.props.status),a=this.getWarningText(this.props.warning),r=Object(m.b)({text:this.props.personDisplayName}),o=Object(v.a)(this.props.personDisplayName,Object(y.a)());return S.createElement(g.a,{className:"lpc_nested_popup",containerClassName:e.modal,isOpen:!0,onDismiss:this.props.onDismiss,titleAriaId:this.props.strings.uploadHeader},S.createElement(f.a,{id:"lpc-photo-picker",className:e.picker,componentRef:function(e){return t.focusTrap=e},firstFocusableSelector:e.fileInputButton},S.createElement(p.a,{className:e.closeButton,iconProps:{iconName:"Cancel"},onClick:this.props.onDismiss,ariaLabel:this.props.strings.cancel}),S.createElement("div",{className:e.header},S.createElement("div",{className:e.uploadHeader},this.props.strings.uploadHeader)),a&&S.createElement(H,{theme:this.props.theme,warning:this.props.warning,status:this.props.status,warningText:a,onDismiss:this.props.onDismissInfoBar}),S.createElement("input",{role:"button",className:e.fileInput,type:"file",ref:function(e){return t.fileInput=e},onClick:function(t){return t.currentTarget.value=""},onChange:function(e){return e.currentTarget.files&&t.props.onFileSelected(e.currentTarget.files[0])},"data-log-name":"PhotoPickerFileInput",accept:"image/*"}),S.createElement(c.a,{className:e.fileInputButton,iconProps:{iconName:"Add"},onClick:function(){return t.fileInput&&t.fileInput.click()}},this.props.strings.upload),S.createElement(M,{theme:this.props.theme,ref:function(e){return t.editCanvas=e},dataUrl:this.props.dataUrl,initials:o,textboyColor:r,progress:this.props.progress,warning:a,strings:this.props.strings,onError:this.props.onError,onFileSelected:this.props.onFileSelected,onRefocus:function(){return t.onFocusChange()},onUpdate:this.props.onImageUpdated}),S.createElement("div",{className:e.endActions},S.createElement(d.a,{disabled:!this.props.isUpdated||"IN_PROGRESS"===this.props.status,onClick:this.handleOnSaveButtonClicked,"data-log-name":"PhotoPickerOkay",componentRef:function(e){return t.primaryButton=e}},n),this.props.progress>0?null:S.createElement(h.a,{onClick:this.handleOnCancelButtonClicked,"data-log-name":"PhotoPickerCancel"},this.props.strings.cancel),this.props.isImageRemovable&&S.createElement(c.a,{className:e.removeButton,iconProps:{iconName:"Delete"},onClick:this.handleOnRemoveButtonClicked,"data-log-name":"PhotoPickerDelete"},this.props.strings.remove))))},e.prototype.componentDidMount=function(){var t=this;this.loadCurrentImage(),requestAnimationFrame(function(){return t.focusTrap&&t.focusTrap.focus()})},e.prototype.componentWillUnmount=function(){this.props.onImageEditCancelled()},e.prototype.componentDidUpdate=function(t){"IN_PROGRESS"===this.props.status&&requestAnimationFrame(this.handleUploadAnimation),"IN_PROGRESS"===t.status&&"SUCCESS"===this.props.status&&this.primaryButton&&this.primaryButton.focus()},e.prototype.onFocusChange=function(){"SUCCESS"===this.props.status?this.primaryButton&&this.primaryButton.focus():this.focusTrap&&this.focusTrap.focus()},e.prototype.getSaveButtonText=function(t){switch(t){case"IN_PROGRESS":return this.props.strings.inProgress;case"SUCCESS":return this.props.strings.close;case"READY":case"SOMETHING_WENT_WRONG":return this.props.strings.apply;default:return Object(l.g)(t)}},e.prototype.getWarningText=function(t){switch(t){case"IMAGE_TOO_SMALL":return this.props.strings.imageTooSmall;case"NOT_AN_IMAGE":return this.props.strings.notAnImage;case"UNKNOWN":return this.props.strings.somethingWentWrong;case"UNSUPPORTED_BROWSER":return this.props.strings.unsupportedBrowser;default:return""}},e.prototype.loadCurrentImage=function(){var t=this,e=new Image;e.crossOrigin="Anonymous",e.onload=function(){return t.profileImageLoaded(e)},e.onerror=function(){return t.profileImageLoadFailed()},e.src=this.props.personImageUrl},e.prototype.profileImageLoaded=function(t){var e=document.createElement("canvas");e.width=t.naturalWidth,e.height=t.naturalHeight;var n=e.getContext("2d");n?(n.drawImage(t,0,0),this.props.onLoadedCurrentImage(C(e))):this.props.onError("UNSUPPORTED_BROWSER")},e.prototype.profileImageLoadFailed=function(){this.props.onLoadedEmptyImage()},e}(S.Component);var X=Object(u.a)(Object(b.b)(function(t,e){var n=a.a.getSelectors(t),r=0;switch(n.status){case"IN_PROGRESS":var o=n.uploadDuration/2e3;r=.999999*F(o);break;case"SUCCESS":r=1;break;case"READY":case"SOMETHING_WENT_WRONG":r=0;break;default:Object(l.g)(n.status)}return{dataUrl:n.dataUrl,initialImage:n.currentImageDataUrl,warning:n.warning,status:n.status,isUpdated:n.isUpdated,progress:r}},function(t){return{onDismissInfoBar:function(){return t(E.j())},onError:function(e){return t(E.f({warning:e}))},onFileSelected:function(e){return function(t,e){var n=new FileReader,a=function(){return t(E.f({warning:"NOT_AN_IMAGE"}))};n.onerror=a,n.onloadend=function(){var e=document.createElement("img");e.onerror=a,e.onload=function(){return t(E.e({dataUrl:e.src}))},e.src=String(n.result)},n.readAsDataURL(e)}(t,e)},onImageEditCancelled:function(){return t(E.a())},onImageUpdated:function(){return t(E.b())},onLoadedCurrentImage:function(e){return t(E.c({dataUrl:e}))},onLoadedEmptyImage:function(){return t(E.d())},onStartUpload:function(e,n,a){return function(t,e,n,a){t(E.h({now:e})),a(n,function(){return t(E.i({dataUrl:n}))},function(){return t(E.f({warning:"UNKNOWN"}))})}(t,e,n,a)},onUploadProgress:function(e){return t(E.g({now:e}))}}})(Y)),K=n(547),Z=n(284),V=n(549),q=n(686),J=n(48),Q=function(){var t=function(e,n){return(t=s.a||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?o()(n):(a.prototype=n.prototype,new a)}}(),$=function(){return($=x.a||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},tt=!1;function et(){tt||(tt=!0,Object(q.a)(void 0,{disableWarnings:!0}))}var nt=null,at=0,rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Q(e,t),e.prototype.componentWillMount=function(){if(at>=1)throw new Error("Can only mount one StandaloneProfilePhotoPicker at a time.");if(at+=1,et(),null===nt){var t=Object(J.createStore)(Object(K.a)([a.a]));nt=new Z.a({reduxStore:t})}},e.prototype.componentWillUnmount=function(){at-=1},e.prototype.render=function(){return nt?S.createElement(V.a,{context:nt},S.createElement(X,$({},this.props))):null},e}(S.Component);n.d(e,"ProfilePhotoPickerStore",function(){return a.a}),n.d(e,"ProfilePhotoPicker",function(){return X}),n.d(e,"StandaloneProfilePhotoPicker",function(){return rt}),n.d(e,"initIcons",function(){return et})},817:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var a=n(6),r=n(42),o=n(39),i=n(893),s={dataUrl:void 0,currentImageDataUrl:void 0,status:"READY",warning:void 0,show:!1,isUpdated:!1,uploadStart:0,uploadDuration:0},l=Object(r.a)().handleAction(i.a,function(t){return Object(a.k)(t,{dataUrl:"",currentImageDataUrl:"",status:"READY",warning:void 0,isUpdated:!1})}).handleAction(i.j,function(t){return Object(a.k)(t,{status:"READY",warning:void 0})}).handleAction(i.c,function(t,e){var n=e.payload.dataUrl;return Object(a.k)(t,{dataUrl:t.dataUrl||n,currentImageDataUrl:t.currentImageDataUrl||n})}).handleAction(i.e,function(t,e){return Object(a.k)(t,{dataUrl:e.payload.dataUrl,status:"READY",warning:void 0,isUpdated:e.payload.dataUrl!==t.currentImageDataUrl})}).handleAction(i.d,function(t){return Object(a.k)(t,{dataUrl:"",status:"READY",warning:void 0,isUpdated:!!t.currentImageDataUrl})}).handleAction(i.h,function(t,e){return Object(a.k)(t,{status:"IN_PROGRESS",warning:void 0,uploadStart:e.payload.now,uploadDuration:0})}).handleAction(i.g,function(t,e){return"IN_PROGRESS"===t.status?Object(a.k)(t,{uploadDuration:e.payload.now-t.uploadStart}):t}).handleAction(i.i,function(t,e){return Object(a.k)(t,{currentImageDataUrl:e.payload.dataUrl,status:"SUCCESS",warning:void 0})}).handleAction(i.f,function(t,e){return Object(a.k)(t,{status:"SOMETHING_WENT_WRONG",warning:e.payload.warning})}).handleAction(i.b,function(t){return Object(a.k)(t,{isUpdated:!0})}).done(s),u=Object(o.a)("ProfilePhotoPickerStore",l,function(t){return t})},893:function(t,e,n){"use strict";n.d(e,"f",function(){return i}),n.d(e,"a",function(){return s}),n.d(e,"b",function(){return l}),n.d(e,"c",function(){return u}),n.d(e,"d",function(){return p}),n.d(e,"e",function(){return c}),n.d(e,"h",function(){return d}),n.d(e,"g",function(){return h}),n.d(e,"i",function(){return m}),n.d(e,"j",function(){return f});var a=n(1),r="ProfilePhotoPicker";function o(t,e){void 0===e&&(e=null);var n=""+r+t+"Action";return Object(a.a)(n,{featureName:r,exportOptions:e?{exportType:"UserInteraction",exportName:e}:void 0})}var i=o("SomethingWentWrong"),s=o("ImageEditCancelled","ProfilePhotoPickerCancelButtonClicked"),l=o("ImageUpdated"),u=o("LoadedCurrentImage"),p=o("LoadedEmptyImage"),c=o("LoadedNewImage"),d=o("UploadStarted","ProfilePhotoPickerApplyButtonClicked"),h=o("UploadProgress"),m=o("UploadSucceeded"),f=o("WarningDismissed")}}]);